!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ps",[],t):"object"==typeof exports?exports.ps=t():e.ps=t()}(this,(function(){return function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],f=0,h=[];f<s.length;f++)a=s[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&h.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);h.length;)h.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={6:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=this.webpackJsonp_name_=this.webpackJsonp_name_||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;return i.push([56,2]),n()}({10:function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function w(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=w,o.addListener=w,o.once=w,o.off=w,o.removeListener=w,o.removeAllListeners=w,o.emit=w,o.prependListener=w,o.prependOnceListener=w,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},56:function(e,t,n){function r(){n(57)}var o=function(){return["AbortController"in self&&"function"==typeof self.AbortController?0:1,"filter"in Array.prototype?0:1,"findIndex"in Array.prototype?0:1,"values"in Object?0:1,"Promise"in self?0:1,"endsWith"in String.prototype?0:1,"includes"in String.prototype?0:1,"fetch"in self&&"Request"in self&&function(){try{return"signal"in new Request("")}catch(e){return!1}}()?0:1]}.call(window);if(-1===o.indexOf(1))r();else{var i=document.createElement("script");i.src="/polyfills."+o.join("")+".js",i.onload=r,i.onerror=function(e){console.error("Could not load the polyfills: "+e)},document.head.appendChild(i)}},57:function(e,t,n){(function(e){var t=n(23),r=[],o=!1;if("springernature.com,springer.com,nature.com,acs.org,getft.io,seamlessaccess.org,sunet.se,swamid.se,literatumonline.com,sciencedirect.com,safire.ac.za,inacademia.org,getfulltextresearch.com,wiley.com,embopress.org,uma.se,tandfonline.com,openathens.net,liblynx.com,scitation.org,elsevier.com,sagepub.com,emerald.com,jamanetwork.com,silverchair.com,thehistorymakers.org,mendeley.com,scopus.com,cambridge.org,magonlinelibrary.com,degruyter.com,ieee.org,brill-dev.pubfactory.com,test.brill.com,kweli.tv,britishonlinearchives.digital,lyellcollection.org,aiaa.org,boneandjoint.org.uk,edu.medici.tv,brill.com,worldscientific.com".length>0&&(r="springernature.com,springer.com,nature.com,acs.org,getft.io,seamlessaccess.org,sunet.se,swamid.se,literatumonline.com,sciencedirect.com,safire.ac.za,inacademia.org,getfulltextresearch.com,wiley.com,embopress.org,uma.se,tandfonline.com,openathens.net,liblynx.com,scitation.org,elsevier.com,sagepub.com,emerald.com,jamanetwork.com,silverchair.com,thehistorymakers.org,mendeley.com,scopus.com,cambridge.org,magonlinelibrary.com,degruyter.com,ieee.org,brill-dev.pubfactory.com,test.brill.com,kweli.tv,britishonlinearchives.digital,lyellcollection.org,aiaa.org,boneandjoint.org.uk,edu.medici.tv,brill.com,worldscientific.com".split(",").map((function(e){return e.trim()}))),e.env.EXPIRE_ENABLED){var i=e.env.EXPIRE_ENABLED.toLowerCase();o="true"===i||"on"===i||"1"===i}var a=n(58),s=1e3*parseInt(e.env.ITEM_TTL||"3600");function u(){return Date.now()}Date.now||(Date.now=function(){return(new Date).getTime()}),String.prototype.hexEncode=function(){var e,t="";for(e=0;e<this.length;e++)t+=("000"+this.charCodeAt(e).toString(16)).slice(-4);return t},String.prototype.hexDecode=function(){var e,t=this.match(/.{1,4}/g)||[],n="";for(e=0;e<t.length;e++)n+=String.fromCharCode(parseInt(t[e],16));return n};function c(e){e||(e="seamlessaccess.org");var t=a.initNamespaceStorage(e).localStorage;return t.set("_name",e),t}function l(e){if(e.entity){var t=e.entity;if(t.entityID&&!t.entity_id&&(t.entity_id=t.entityID),t.icon&&!t.entity_icon&&(t.entity_icon=t.icon),t.domains){var n=t.domains.split(";")||[];t.domain=n[0]}t.last_refresh&&!t.last_use&&(t.last_use=t.last_refresh),t.title||(t.title=t.entity_id)}return e}function f(e){console.log("gc..."),e.keys().filter((function(e){return void 0!==e&&"_name"!==e})).map((function(t){return l(h(e,t))})).sort((function(e,t){return t.last_use-e.last_use})).slice(3).forEach((function(t){e.remove(t.entity.entity_id.hexEncode())}));var t=u();e.keys().filter((function(e){return void 0!==e&&"_name"!==e})).map((function(t){return h(e,t)})).forEach((function(n){console.log(n),function(e,t){console.log(void 0!==e),console.log(void 0!==e.last_refresh);var n=e.last_refresh+3e4+s;return console.log(n),console.log(t),console.log(t-n),void 0!==e&&void 0!==e.last_refresh&&e.last_refresh+3e4+s>t}(n,t)||(console.log("... removing"),e.remove(n.entity.entity_id.hexEncode()))}))}function h(e,t){return e.isSet(t)?e.get(t):void 0}function p(e){if(r&&r.length>0&&!r.some((function(t){return e.origin.endsWith(t)})))throw"Access denied from ".concat(e.origin)}function d(e,t){var n,r=u();console.log("setting..."),console.log(t),null!=t.entity?t=(n=t).entity:n={last_refresh:r,last_use:r,entity:t},t.entityID&&!t.entity_id&&(t.entity_id=t.entityID);var o=t.entity_id.hexEncode();return n=l(n),e.set(o,n)}t.on("persist",{window:window.parent},(function(e){p(e);var t=e.data.entities,n=c(e.data.context);n.removeAll(),n.set("_name",e.data.context),t.forEach((function(e){d(n,e)}))})),t.on("update",{window:window.parent},(function(e){p(e);var t=e.data.entity;return d(c(e.data.context),t)})),t.on("expire",{window:window.parent},(function(e){o&&(p(e),f(c(e.data.context)))})),t.on("entities",{window:window.parent},(function(e){p(e);var t=c(e.data.context),n=e.data.count;void 0===n&&(n=3);u();return t.keys().filter((function(e){return void 0!==e&&"_name"!==e})).map((function(e){return l(h(t,e))})).sort((function(e,t){return e.last_use-t.last_use})).slice(-n)})),t.on("entity",{window:window.parent},(function(e){p(e);var t=c(e.data.context),n=e.data.entity_id;if(!n)throw new Error("Unable to find entity_id in request");var r=n.hexEncode(),o=h(t,r);if(o){var i=u();o.last_use=i,t.set(r,l(o))}return o})),t.on("remove",{window:window.parent},(function(e){p(e);var t=c(e.data.context),n=e.data.entity_id;void 0===n||t.remove(n.hexEncode())}))}).call(this,n(10))},58:function(e,t,n){var r,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a){var s=!1;if(void 0===(o="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=o),s=!0,"object"===i(t)&&(e.exports=a(),s=!0),!s){var u=window.Storages,c=window.Storages=a();c.noConflict=function(){return window.Storages=u,c}}}((function(){var e={},t=e.toString,n=e.hasOwnProperty,r=n.toString,o=r.call(Object),a=Object.getPrototypeOf,s={};function u(){var e,t,n,r,o,i=this._type,a=arguments.length,s=window[i],u=arguments,c=u[0];if(a<1)throw new Error("Minimum 1 argument must be given");if(Array.isArray(c)){for(r in t={},c)if(c.hasOwnProperty(r)){e=c[r];try{t[e]=JSON.parse(s.getItem(e))}catch(n){t[e]=s.getItem(e)}}return t}if(1!=a){try{t=JSON.parse(s.getItem(c))}catch(e){throw new ReferenceError(c+" is not defined in this storage")}for(r=1;r<a-1;r++)if(void 0===(t=t[u[r]]))throw new ReferenceError([].slice.call(u,1,r+1).join(".")+" is not defined in this storage");if(Array.isArray(u[r])){for(o in n=t,t={},u[r])u[r].hasOwnProperty(o)&&(t[u[r][o]]=n[u[r][o]]);return t}return t[u[r]]}try{return JSON.parse(s.getItem(c))}catch(e){return s.getItem(c)}}function c(){var e,t,n,r,o=this._type,a=arguments.length,s=window[o],u=arguments,c=u[0],l=u[1],f=isNaN(l)?{}:[];if(a<1||!y(c)&&a<2)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");if(y(c)){for(r in c)c.hasOwnProperty(r)&&(y(e=c[r])||this.alwaysUseJson?s.setItem(r,JSON.stringify(e)):s.setItem(r,e));return c}if(2==a)return"object"===i(l)||this.alwaysUseJson?s.setItem(c,JSON.stringify(l)):s.setItem(c,l),l;try{null!=(n=s.getItem(c))&&(f=JSON.parse(n))}catch(e){}for(n=f,r=1;r<a-2;r++)e=u[r],t=isNaN(u[r+1])?"object":"array",(!n[e]||"object"==t&&!y(n[e])||"array"==t&&!Array.isArray(n[e]))&&(n[e]="array"==t?[]:{}),n=n[e];return n[u[r]]=u[r+1],s.setItem(c,JSON.stringify(f)),f}function l(){var e,t,n,r,o=this._type,i=arguments.length,a=window[o],s=arguments,u=s[0];if(i<1)throw new Error("Minimum 1 argument must be given");if(Array.isArray(u)){for(n in u)u.hasOwnProperty(n)&&a.removeItem(u[n]);return!0}if(1==i)return a.removeItem(u),!0;try{e=t=JSON.parse(a.getItem(u))}catch(e){throw new ReferenceError(u+" is not defined in this storage")}for(n=1;n<i-1;n++)if(void 0===(t=t[s[n]]))throw new ReferenceError([].slice.call(s,1,n).join(".")+" is not defined in this storage");if(Array.isArray(s[n]))for(r in s[n])s[n].hasOwnProperty(r)&&delete t[s[n][r]];else delete t[s[n]];return a.setItem(u,JSON.stringify(e)),!0}function f(e){var t,n=d.call(this);for(t in n)n.hasOwnProperty(t)&&l.call(this,n[t]);if(e)for(t in s.namespaceStorages)s.namespaceStorages.hasOwnProperty(t)&&w(t)}function h(){var e,t=arguments.length,n=arguments,r=n[0];if(0==t)return 0==d.call(this).length;if(Array.isArray(r)){for(e=0;e<r.length;e++)if(!h.call(this,r[e]))return!1;return!0}try{var o=u.apply(this,arguments);for(e in Array.isArray(n[t-1])||(o={totest:o}),o)if(o.hasOwnProperty(e)&&!(y(o[e])&&g(o[e])||Array.isArray(o[e])&&!o[e].length||"boolean"!=typeof o[e]&&!o[e]))return!1;return!0}catch(e){return!0}}function p(){var e,t=arguments.length,n=arguments,r=n[0];if(t<1)throw new Error("Minimum 1 argument must be given");if(Array.isArray(r)){for(e=0;e<r.length;e++)if(!p.call(this,r[e]))return!1;return!0}try{var o=u.apply(this,arguments);for(e in Array.isArray(n[t-1])||(o={totest:o}),o)if(o.hasOwnProperty(e)&&(void 0===o[e]||null===o[e]))return!1;return!0}catch(e){return!1}}function d(){var e=this._type,t=arguments.length,n=window[e],r=[],o={};if((o=t>0?u.apply(this,arguments):n)&&o._cookie){var i=Cookies.get();for(var a in i)i.hasOwnProperty(a)&&""!=a&&r.push(a.replace(o._prefix,""))}else for(var s in o)o.hasOwnProperty(s)&&r.push(s);return r}function w(e){if(!e||"string"!=typeof e)throw new Error("First parameter must be a string");v?(window.localStorage&&!window.localStorage.getItem(e)&&window.localStorage.setItem(e,"{}"),window.sessionStorage&&!window.sessionStorage.getItem(e)&&window.sessionStorage.setItem(e,"{}")):(window.localCookieStorage&&!window.localCookieStorage.getItem(e)&&window.localCookieStorage.setItem(e,"{}"),window.sessionCookieStorage&&!window.sessionCookieStorage.getItem(e)&&window.sessionCookieStorage.setItem(e,"{}"));var t={};return window.localStorage&&(t.localStorage=m({},s.localStorage,{_ns:e})),window.sessionStorage&&(t.sessionStorage=m({},s.sessionStorage,{_ns:e})),_&&window.cookieStorage&&(window.cookieStorage.getItem(e)||window.cookieStorage.setItem(e,"{}"),t.cookieStorage=m({},s.cookieStorage,{_ns:e})),s.namespaceStorages[e]=t,t}function y(e){var i,s;return!(!e||"[object Object]"!==t.call(e))&&(!(i=a(e))||"function"==typeof(s=n.call(i,"constructor")&&i.constructor)&&r.call(s)===o)}function g(e){var t;for(t in e)return!1;return!0}function m(){for(var e=1,t=arguments[0];e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}var v=function(e){try{return!!window[e]&&(window[e].setItem("jsapi","jsapi"),window[e].removeItem("jsapi"),!0)}catch(e){return!1}}("localStorage"),_="undefined"!=typeof Cookies,S={_type:"",_ns:"",_callMethod:function(e,t){var n=[],r=(t=Array.prototype.slice.call(t))[0];return this._ns&&n.push(this._ns),"string"==typeof r&&-1!==r.indexOf(".")&&(t.shift(),[].unshift.apply(t,r.split("."))),[].push.apply(n,t),e.apply(this,n)},alwaysUseJson:!1,get:function(){return v||_?this._callMethod(u,arguments):null},set:function(){var e=arguments.length,t=arguments,n=t[0];if(e<1||!y(n)&&e<2)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");if(!v&&!_)return null;if(y(n)&&this._ns){for(var r in n)n.hasOwnProperty(r)&&this._callMethod(c,[r,n[r]]);return n}var o=this._callMethod(c,t);return this._ns?o[n.split(".")[0]]:o},remove:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return v||_?this._callMethod(l,arguments):null},removeAll:function(e){return v||_?this._ns?(this._callMethod(c,[{}]),!0):this._callMethod(f,[e]):null},isEmpty:function(){return v||_?this._callMethod(h,arguments):null},isSet:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return v||_?this._callMethod(p,arguments):null},keys:function(){return v||_?this._callMethod(d,arguments):null}};if(_){window.name||(window.name=Math.floor(1e8*Math.random()));var b={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(e,t){Cookies.set(this._prefix+e,t,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(e){return Cookies.get(this._prefix+e)},removeItem:function(e){return Cookies.remove(this._prefix+e,{path:this._path})},clear:function(){var e=Cookies.get();for(var t in e)e.hasOwnProperty(t)&&""!=t&&(!this._prefix&&-1===t.indexOf("ls_")&&-1===t.indexOf("ss_")||this._prefix&&0===t.indexOf(this._prefix))&&Cookies.remove(t)},setExpires:function(e){return this._expires=e,this},setPath:function(e){return this._path=e,this},setDomain:function(e){return this._domain=e,this},setConf:function(e){return e.path&&(this._path=e.path),e.domain&&(this._domain=e.domain),e.expires&&(this._expires=e.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null}};v||(window.localCookieStorage=m({},b,{_prefix:"ls_",_expires:3650}),window.sessionCookieStorage=m({},b,{_prefix:"ss_"+window.name+"_"})),window.cookieStorage=m({},b),s.cookieStorage=m({},S,{_type:"cookieStorage",setExpires:function(e){return window.cookieStorage.setExpires(e),this},setPath:function(e){return window.cookieStorage.setPath(e),this},setDomain:function(e){return window.cookieStorage.setDomain(e),this},setConf:function(e){return window.cookieStorage.setConf(e),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})}return s.initNamespaceStorage=function(e){return w(e)},v?(s.localStorage=m({},S,{_type:"localStorage"}),s.sessionStorage=m({},S,{_type:"sessionStorage"})):(s.localStorage=m({},S,{_type:"localCookieStorage"}),s.sessionStorage=m({},S,{_type:"sessionCookieStorage"})),s.namespaceStorages={},s.removeAllStorages=function(e){s.localStorage.removeAll(e),s.sessionStorage.removeAll(e),s.cookieStorage&&s.cookieStorage.removeAll(e),e||(s.namespaceStorages={})},s.alwaysUseJsonInStorage=function(e){S.alwaysUseJson=e,s.localStorage.alwaysUseJson=e,s.sessionStorage.alwaysUseJson=e,s.cookieStorage&&(s.cookieStorage.alwaysUseJson=e)},s}))},9:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}})}));